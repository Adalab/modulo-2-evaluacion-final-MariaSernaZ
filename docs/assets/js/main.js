"use strict";const formElement=document.querySelector(".js-form"),inputElement=document.querySelector(".js-input"),searchElement=document.querySelector(".js-button"),ulElement=document.querySelector(".js-resultList"),ulElementFav=document.querySelector(".js-favoriteList"),resetElement=document.querySelector(".js-reset"),imgDefault="https://via.placeholder.com/210x295/ffffff/666666/?text=TV";let globalShows=[],favoriteShows=[];function getDataShows(){let e=inputElement.value;fetch("//api.tvmaze.com/search/shows?q="+e).then(e=>e.json()).then(e=>{console.log(e),globalShows=e,renderList(globalShows)})}function renderList(e){for(let t=0;t<e.length;t++){let o=e[t].show,s=e[t].show.name,n="";n=null!=e[t].show.image?e[t].show.image.medium:imgDefault,ulElement.innerHTML+=`<li id="${o.id}" class="js-resultList-item list-item favorite">\n                <img src="${n}" alt="Imagen ${s} class="js-img"> \n                <p>${s}</p>\n            </li>`}addListenerLi()}function handleSearch(){getDataShows(),addListenerLi()}function addListenerLi(){const e=document.querySelectorAll(".js-resultList-item");for(const t of e)t.classList.remove("favorite"),t.addEventListener("click",handleClickFav)}function handleClickFav(e){const t=e.currentTarget,o=parseInt(t.id);console.log(o);const s=favoriteShows.find(e=>e.show.id===o);if(console.log("Id",s),console.log("quÃ© es",favoriteShows),void 0===s){const e=globalShows.find(e=>e.show.id===o);favoriteShows.push(e)}else{const e=favoriteShows.findIndex(e=>e.show.id===o);favoriteShows.splice(e,1)}setInLocalStorage(),console.log("tipoInfo",favoriteShows),renderListFav()}function renderListFav(){ulElementFav.innerHTML="";for(let e of favoriteShows){console.log("favorita:",e);let t="";t=null!=e.show.image?e.show.image.medium:imgDefault,ulElementFav.innerHTML+=`<li id="${e.id}" class="js-resultList-item list-item favorite">\n                <img src="${t}" alt="Imagen ${e.show.name} class="js-img"> \n                <p>${e.show.name}</p>\n            </li>`}}searchElement.addEventListener("click",handleSearch);const setInLocalStorage=()=>{const e=JSON.stringify(favoriteShows);localStorage.setItem("favShows",e)};function renderFavLocalStorage(){const e=localStorage.getItem("favShows");console.log("localStorage-Info",e),null===e?favoriteShows=[]:(favoriteShows=JSON.parse(e),renderListFav())}function handleClickReset(){favoriteShows=[],renderListFav(),setInLocalStorage(),renderFavLocalStorage()}renderFavLocalStorage(),resetElement.addEventListener("click",handleClickReset);